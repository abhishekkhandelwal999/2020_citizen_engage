{"ast":null,"code":"import _classCallCheck from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{withRouter}from\"react-router-dom\";import'./UserHome.css';import{BootstrapTable,TableHeaderColumn}from'react-bootstrap-table';import Nav from'./nav.js';import{Container,Row,Col}from'react-bootstrap';var Status={'Pending':'Pending','Closed':'Closed'};function enumFormatter(cell,row,enumObject){//window.location.reload(false);\nreturn enumObject[cell];}var viewComplaints=/*#__PURE__*/function(_Component){_inherits(viewComplaints,_Component);function viewComplaints(props){var _this;_classCallCheck(this,viewComplaints);_this=_possibleConstructorReturn(this,_getPrototypeOf(viewComplaints).call(this,props));_this.state={complaints:[]};return _this;}_createClass(viewComplaints,[{key:\"indexN\",value:function indexN(cell,row,enumObject,index){return React.createElement(\"div\",null,index+1);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var body={id:sessionStorage.getItem(\"Identity\")};console.log(\"Body\"+body.id);var url=\"http://localhost:9000/userAllComplaints\";var headers=new Headers();headers.append('Content-Type','application/json');headers.append('Accept','application/json');headers.append('Access-Control-Allow-origin',url);headers.append('Access-Control-Allow-Credentials','true');headers.append('POST','GET');fetch(url,{headers:headers,method:'POST',body:JSON.stringify(body)}).then(function(response){if(response.ok){// UserProfile.setEmail(this.state.email);\nresponse.json().then(function(res){console.log(\"Response:\"+res);_this2.setState({complaints:res});});}});console.log(body);console.log(\"Body\"+body.id);}},{key:\"expandComponent\",value:function expandComponent(row){var createdimg=\"/images/\"+row.CreatedImage;var closedtime;var closedimg;if(row.Status===\"Pending\"){closedimg=row.ClosedImage;closedtime=\"Not Yet Closed\";//        image = <Row>\n//         <Col><button onClick={event =>  window.location.href= \"/viewandclose/\"+row.Cid}>Take Action</button></Col>\n// </Row>\n}else{var img=\"/images/\"+row.ClosedImage;closedimg=React.createElement(\"img\",{src:img});closedtime=row.ClosedAt;}return React.createElement(\"div\",null,React.createElement(Container,{border:\"5px\"},React.createElement(Row,null,React.createElement(Col,null,\"Cid : \",row.Cid),React.createElement(Col,null,\"Created Time : \",row.CreatedAt),React.createElement(Col,null,\"Closed Time : \",closedtime)),React.createElement(Row,null,React.createElement(Col,null,\"Problem Image : \",React.createElement(\"img\",{src:createdimg})),React.createElement(Col,null,\"Solved Image :\",closedimg)),React.createElement(Row,null,React.createElement(Col,null,\"Description:\",row.CreatedDescription),React.createElement(Col,null,\"Description:\",row.ClosedDescription))));}},{key:\"isExpandableRow\",value:function isExpandableRow(row){return true;}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"wrapper\"},React.createElement(Nav,null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"main_content\"},React.createElement(\"div\",{className:\"header\"},React.createElement(\"h2\",null,React.createElement(\"u\",null,\"Complaints\"))),React.createElement(BootstrapTable,{data:this.state.complaints,expandComponent:this.expandComponent,expandableRow:this.isExpandableRow,striped:true,hover:true,condensed:true,pagination:true},React.createElement(TableHeaderColumn,{width:\"70\",dataField:\"any\",dataFormat:this.indexN},\"S.No\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Cid\",isKey:true,hidden:true},\"CID\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Email\"},\"EMAIL\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Category\"},\"CATEGORY\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Location\"},\"LOCATION\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Status\",filterFormatted:true,dataFormat:enumFormatter,formatExtraData:Status,filter:{type:'SelectFilter',options:Status}},\"STATUS\")))));}}]);return viewComplaints;}(Component);export default withRouter(viewComplaints);","map":{"version":3,"sources":["/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/src/components/User/viewComplaints.js"],"names":["React","Component","withRouter","BootstrapTable","TableHeaderColumn","Nav","Container","Row","Col","Status","enumFormatter","cell","row","enumObject","viewComplaints","props","state","complaints","index","body","id","sessionStorage","getItem","console","log","url","headers","Headers","append","fetch","method","JSON","stringify","then","response","ok","json","res","setState","createdimg","CreatedImage","closedtime","closedimg","ClosedImage","img","ClosedAt","Cid","CreatedAt","CreatedDescription","ClosedDescription","expandComponent","isExpandableRow","indexN","type","options"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport './UserHome.css';\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\nimport Nav  from './nav.js';\nimport {Container,Row,Col} from 'react-bootstrap';\n\nconst Status = {\n  'Pending': 'Pending',\n  'Closed': 'Closed',\n  };\n  function enumFormatter(cell, row, enumObject) {\n    //window.location.reload(false);\n  return enumObject[cell];\n  }\n\nclass viewComplaints extends Component{\n  constructor(props) {\n    super(props);\n    this.state={\n      complaints :[]\n    }\n}\nindexN(cell, row, enumObject, index) {\n  return (<div>{index+1}</div>) \n}\ncomponentDidMount(){\n  var body = {\n    id: sessionStorage.getItem(\"Identity\")\n  }\n  console.log(\"Body\"+body.id);\n\n      const url = \"http://localhost:9000/userAllComplaints\";\n        let headers = new Headers();\n    \n        headers.append('Content-Type','application/json');\n        headers.append('Accept','application/json');\n    \n        headers.append('Access-Control-Allow-origin',url);\n        headers.append('Access-Control-Allow-Credentials','true');\n    \n        headers.append('POST','GET');\n    \n        fetch(url, {\n          headers:headers,\n          method: 'POST',\n          body: JSON.stringify(body)\n        })\n        .then(response => {if(response.ok){\n          // UserProfile.setEmail(this.state.email);\n          response.json()\n          .then(res=> {\n            console.log(\"Response:\"+res)\n            this.setState({\n                complaints : res\n            })          \n          })\n        }\n        \n        })\n        console.log(body);\n        console.log(\"Body\"+body.id);\n           \n  } \n  expandComponent(row) {\n    var createdimg=\"/images/\"+row.CreatedImage;\n      var closedtime;\n      var closedimg;\n      \n      if(row.Status === \"Pending\"){\n        closedimg = row.ClosedImage;\n        closedtime = \"Not Yet Closed\";\n//        image = <Row>\n//         <Col><button onClick={event =>  window.location.href= \"/viewandclose/\"+row.Cid}>Take Action</button></Col>\n// </Row>\n      }\n      else{\n        var img = \"/images/\"+row.ClosedImage;\n        closedimg=<img src={img}/>;\n        closedtime = row.ClosedAt;\n      }\n      return (\n        <div>\n          <Container border=\"5px\">\n            <Row>\n              <Col>Cid : {row.Cid}</Col>\n              <Col>Created Time : {row.CreatedAt}</Col>\n              <Col>Closed Time : {closedtime}</Col>\n            </Row>\n           <Row>\n              <Col>Problem Image : <img src={createdimg}/></Col>\n      <Col>Solved Image :{closedimg}</Col>\n          </Row>\n          <Row>\n      <Col>Description:{row.CreatedDescription}</Col>\n      <Col>Description:{row.ClosedDescription}</Col>\n      </Row>\n      \n</Container>\n        </div>\n      );\n  }\n\n  isExpandableRow(row) {    \n      return true;      \n  }\n\n    render() {\n        \n      return (\n        <div>\n            <div className=\"wrapper\">\n            <Nav/>\n            <br></br><br/>\n            <br/>\n                    <div className=\"main_content\">\n                        <div className=\"header\"><h2><u>Complaints</u></h2></div>\n                        <BootstrapTable data={ this.state.complaints } expandComponent={ this.expandComponent } expandableRow={ this.isExpandableRow } striped hover condensed pagination>\n          <TableHeaderColumn width='70' dataField=\"any\" dataFormat={this.indexN}>S.No</TableHeaderColumn>\n          <TableHeaderColumn width='150' dataField='Cid' isKey hidden>CID</TableHeaderColumn>\n          <TableHeaderColumn  width='150' dataField='Email'>EMAIL</TableHeaderColumn>\n          <TableHeaderColumn width='150' dataField='Category'>CATEGORY</TableHeaderColumn>\n          <TableHeaderColumn width='150' dataField='Location'>LOCATION</TableHeaderColumn>\n          <TableHeaderColumn width='150' dataField='Status' filterFormatted dataFormat={ enumFormatter }  formatExtraData={ Status } filter={ { type: 'SelectFilter', options: Status } }>STATUS</TableHeaderColumn>\n           \n      </BootstrapTable>\n          </div></div></div>\n        );\n    }\n}\nexport default withRouter(viewComplaints);"]},"metadata":{},"sourceType":"module"}