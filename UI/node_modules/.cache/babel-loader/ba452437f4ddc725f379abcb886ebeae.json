{"ast":null,"code":"import _classCallCheck from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{withRouter}from\"react-router-dom\";import'./adminhome.css';import{BootstrapTable,TableHeaderColumn}from'react-bootstrap-table';import Nav from'./nav.js';import{Container,Row,Col,Button}from'react-bootstrap';var body;var Status={'Pending':'Pending','Closed':'Closed'};function enumFormatter(cell,row,enumObject){//window.location.reload(false);\nreturn enumObject[cell];}var topRankedList=/*#__PURE__*/function(_Component){_inherits(topRankedList,_Component);function topRankedList(props){var _this;_classCallCheck(this,topRankedList);_this=_possibleConstructorReturn(this,_getPrototypeOf(topRankedList).call(this,props));_this.state={toprankedlist:[]};return _this;}_createClass(topRankedList,[{key:\"indexN\",value:function indexN(cell,row,enumObject,index){return React.createElement(\"div\",null,index+1);}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;body={Location:sessionStorage.getItem(\"Location\"),Category:sessionStorage.getItem(\"Category\")};console.log(body);var url=\"http://localhost:9000/topRankedList\";var headers=new Headers();headers.append('Content-Type','application/json');headers.append('Accept','application/json');headers.append('Access-Control-Allow-origin',url);headers.append('Access-Control-Allow-Credentials','true');headers.append('POST','GET');fetch(url,{headers:headers,method:'POST',body:JSON.stringify(body)}).then(function(response){if(response.ok){// UserProfile.setEmail(this.state.email);\nresponse.json().then(function(res){console.log(res);_this2.setState({toprankedlist:res});});}else if(!response.ok){console.log(\"Response not ok\");alert(\"No details to display\");}});//   .then(response => {\n//       console.log(response.json())\n//   })\n{/*}.catch((error)=> {console.log(\"can't access\" + url + \"response. \" +error )},\n            alert(\"Wrong email or password\"))*/}}},{key:\"expandComponent\",value:function expandComponent(row){var createdimg=\"/images/\"+row.CreatedImage;var closedtime;var closedimg;var image;if(row.Status===\"Pending\"){closedimg=row.ClosedImage;closedtime=\"Not Yet Closed\";image=React.createElement(Row,null,React.createElement(Col,null,React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",onClick:function onClick(event){sessionStorage.setItem(\"Cid\",row.Cid);sessionStorage.setItem(\"UserMail\",row.Email);sessionStorage.setItem(\"MailLocation\",row.Location);sessionStorage.setItem(\"MailCategory\",row.Category);sessionStorage.setItem(\"MailName\",row.Name);window.location.href=\"/viewandclose\";}},\"Take Action\")));}else{var img=\"/images/\"+row.ClosedImage;closedimg=React.createElement(\"img\",{src:img});closedtime=row.ClosedAt;}return React.createElement(\"div\",null,React.createElement(Container,{border:\"5px\"},React.createElement(Row,null,React.createElement(Col,null,\"Cid : \",row.Cid),React.createElement(Col,null,\"Created Time : \",row.CreatedAt),React.createElement(Col,null,\"Closed Time : \",closedtime)),React.createElement(Row,null,React.createElement(Col,null,\"Problem Image : \",React.createElement(\"img\",{src:createdimg})),React.createElement(Col,null,\"Solved Image :\",closedimg)),React.createElement(Row,null,React.createElement(Col,null,\"Problem Description:\",row.CreatedDescription),React.createElement(Col,null,\"Solution Description:\",row.ClosedDescription)),image));}},{key:\"isExpandableRow\",value:function isExpandableRow(row){return true;}},{key:\"handleSubmit\",value:function handleSubmit(){window.location.href=\"/topranked\";}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"wrapper\"},React.createElement(Nav,null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"main_content\"},React.createElement(\"div\",{className:\"header\"},React.createElement(\"h2\",null,React.createElement(\"u\",null,\"Categorised Complaints\"))),React.createElement(BootstrapTable,{data:this.state.toprankedlist,expandComponent:this.expandComponent,expandableRow:this.isExpandableRow,striped:true,hover:true,condensed:true},React.createElement(TableHeaderColumn,{width:\"70\",dataField:\"any\",dataFormat:this.indexN},\"S.No\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Cid\",isKey:true,hidden:true},\"CID\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Email\"},\"EMAIL\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Category\"},\"CATEGORY\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Location\"},\"LOCATION\"),React.createElement(TableHeaderColumn,{width:\"150\",dataField:\"Status\",filterFormatted:true,dataFormat:enumFormatter,formatExtraData:Status,filter:{type:'SelectFilter',options:Status}},\"STATUS\")),React.createElement(\"center\",null,React.createElement(Button,{type:\"submit\",variant:\"secondary\",size:\"lg\",onClick:this.handleSubmit},\"Back\")))));}}]);return topRankedList;}(Component);export default withRouter(topRankedList);","map":{"version":3,"sources":["/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/src/components/admin/topRankedList.js"],"names":["React","Component","withRouter","BootstrapTable","TableHeaderColumn","Nav","Container","Row","Col","Button","body","Status","enumFormatter","cell","row","enumObject","topRankedList","props","state","toprankedlist","index","Location","sessionStorage","getItem","Category","console","log","url","headers","Headers","append","fetch","method","JSON","stringify","then","response","ok","json","res","setState","alert","createdimg","CreatedImage","closedtime","closedimg","image","ClosedImage","event","setItem","Cid","Email","Name","window","location","href","img","ClosedAt","CreatedAt","CreatedDescription","ClosedDescription","expandComponent","isExpandableRow","indexN","type","options","handleSubmit"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {  withRouter} from \"react-router-dom\";\nimport './adminhome.css';\nimport {BootstrapTable, TableHeaderColumn} from 'react-bootstrap-table';\nimport Nav  from './nav.js';\nimport {Container,Row,Col,Button} from 'react-bootstrap';\n\n\nvar body;\nconst Status = {\n    'Pending': 'Pending',\n    'Closed': 'Closed',\n    };\n    function enumFormatter(cell, row, enumObject) {\n      //window.location.reload(false);\n    return enumObject[cell];\n    }\n\nclass topRankedList extends Component{\n  constructor(props) {\n    super(props);\n    this.state={\n      toprankedlist :[]\n    }\n    \n  }\n\n  indexN(cell, row, enumObject, index) {\n    return (<div>{index+1}</div>) \n} \n\n  componentDidMount() {\n    body = {\n        Location : sessionStorage.getItem(\"Location\"),\n        Category : sessionStorage.getItem(\"Category\")\n      }\n      console.log(body);\n        const url = \"http://localhost:9000/topRankedList\";\n          let headers = new Headers();\n      \n          headers.append('Content-Type','application/json');\n          headers.append('Accept','application/json');\n      \n          headers.append('Access-Control-Allow-origin',url);\n          headers.append('Access-Control-Allow-Credentials','true');\n      \n          headers.append('POST','GET');\n      \n          fetch(url, {\n            headers:headers,\n            method: 'POST',\n            body: JSON.stringify(body)\n          })\n          .then(response => {if(response.ok){\n            // UserProfile.setEmail(this.state.email);\n            response.json()\n            .then(res=> {\n              console.log(res)\n              this.setState({\n                  toprankedlist : res\n              })          \n            })\n          }\n          else if(!response.ok){\n            console.log(\"Response not ok\")\n            alert(\"No details to display\")\n          }\n          })\n    \n        //   .then(response => {\n        //       console.log(response.json())\n        //   })\n          {/*}.catch((error)=> {console.log(\"can't access\" + url + \"response. \" +error )},\n            alert(\"Wrong email or password\"))*/}\n\n          \n      \n    } \n\n    expandComponent(row) {\n        var createdimg=\"/images/\"+row.CreatedImage;\n        var closedtime;\n        var closedimg;\n        var image;\n        if(row.Status === \"Pending\"){\n          closedimg = row.ClosedImage;\n          closedtime = \"Not Yet Closed\";\n         image = <Row>\n           <Col>\n        <button type=\"submit\" className=\"btn btn-primary btn-block\" onClick={(event) => \n          {sessionStorage.setItem(\"Cid\",row.Cid)\n          sessionStorage.setItem(\"UserMail\",row.Email)\n          sessionStorage.setItem(\"MailLocation\",row.Location)\n          sessionStorage.setItem(\"MailCategory\",row.Category)\n          sessionStorage.setItem(\"MailName\",row.Name)\n          window.location.href= \"/viewandclose\"}}>Take Action</button></Col>\n  </Row>\n        }\n        else{\n          var img = \"/images/\"+row.ClosedImage;\n          closedimg=<img src={img}/>;\n          closedtime = row.ClosedAt;\n        }\n        return (\n          <div>\n            <Container border=\"5px\">\n              <Row>\n                <Col>Cid : {row.Cid}</Col>\n                <Col>Created Time : {row.CreatedAt}</Col>\n                <Col>Closed Time : {closedtime}</Col>\n              </Row>\n             <Row>\n                <Col>Problem Image : <img src={createdimg}/></Col>\n        <Col>Solved Image :{closedimg}</Col>\n            </Row>\n            <Row>\n        <Col>Problem Description:{row.CreatedDescription}</Col>\n        <Col>Solution Description:{row.ClosedDescription}</Col>\n        </Row>{image}\n  </Container>\n          </div>\n        );\n      }\n  \n      isExpandableRow(row) {    \n          return true;      \n      }\n      \n    handleSubmit(){\n        window.location.href=\"/topranked\";\n    }\n\n    render() {\n        \n      return (\n        <div>\n            <div className=\"wrapper\">\n            <Nav/>\n            <br></br><br/>\n            <br/>\n                    <div className=\"main_content\">\n                        <div className=\"header\"><h2><u>Categorised Complaints</u></h2></div>\n          <BootstrapTable data={ this.state.toprankedlist }  expandComponent={ this.expandComponent } expandableRow={ this.isExpandableRow } striped hover condensed >\n          <TableHeaderColumn  width='70' dataField=\"any\" dataFormat={this.indexN}>S.No</TableHeaderColumn>\n          <TableHeaderColumn width='150' dataField='Cid' isKey hidden>CID</TableHeaderColumn>\n          <TableHeaderColumn  width='150' dataField='Email'>EMAIL</TableHeaderColumn>\n          <TableHeaderColumn width='150' dataField='Category'>CATEGORY</TableHeaderColumn>\n          <TableHeaderColumn width='150' dataField='Location'>LOCATION</TableHeaderColumn>\n          <TableHeaderColumn width='150' dataField='Status' filterFormatted dataFormat={ enumFormatter }  formatExtraData={ Status } filter={ { type: 'SelectFilter', options: Status } }>STATUS</TableHeaderColumn>\n          \n      </BootstrapTable>\n      <center><Button type=\"submit\" variant=\"secondary\" size=\"lg\" onClick={this.handleSubmit}>Back</Button></center>    \n          </div></div></div>\n        );\n    }\n}\nexport default withRouter(topRankedList);"]},"metadata":{},"sourceType":"module"}