{"ast":null,"code":"import _defineProperty from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";//import logo from '../images/userhome.jpg';\nimport'../images/bgimage.css';import'./UserHome.css';import Nav from'./nav.js';import img from'../images/userlogin.jpeg';var image={backgroundImage:'url('+img+')',width:'100%',height:'100%',backgroundRepeat:'no-repeat',backgroundSize:'100% 100%'};var span1={color:\"red\"};var body;var validEmailRegex=RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);var validNameRegex=RegExp(/^[a-z A-Z,.'-]+$/i);var validMobileRegex=RegExp(/^[6-9]{1}[0-9]{9}$/);var EditProfile=/*#__PURE__*/function(_Component){_inherits(EditProfile,_Component);function EditProfile(props){var _this;_classCallCheck(this,EditProfile);_this=_possibleConstructorReturn(this,_getPrototypeOf(EditProfile).call(this,props));_this.handleNameChange=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;var errors=_this.state.errors;errors.name=validNameRegex.test(value)?'':'Name should contain only letters';if(errors.name===''){_this.setState({n:true});}else{_this.setState({n:false});}_this.setState(_defineProperty({errors:errors},name,value));};_this.handleEmailChange=function(event){var _event$target2=event.target,name=_event$target2.name,value=_event$target2.value;var errors=_this.state.errors;errors.email=validEmailRegex.test(value)?'':'Email is not valid!';if(errors.email===''){_this.setState({e:true});}else{_this.setState({e:false});}_this.setState(_defineProperty({errors:errors},name,value));};_this.handleMobileChange=function(event){var _event$target3=event.target,name=_event$target3.name,value=_event$target3.value;var errors=_this.state.errors;errors.mobile=validMobileRegex.test(value)?'':'Enter a valid phone number!';if(errors.mobile===''){_this.setState({m:true});}else{_this.setState({m:false});}_this.setState(_defineProperty({errors:errors},name,value));};_this.handleNameChange=_this.handleNameChange.bind(_assertThisInitialized(_this));_this.handleEmailChange=_this.handleEmailChange.bind(_assertThisInitialized(_this));_this.handleMobileChange=_this.handleMobileChange.bind(_assertThisInitialized(_this));_this.handleUpdate=_this.handleUpdate.bind(_assertThisInitialized(_this));_this.state={n:true,e:true,m:true,name:\"\",email:\"\",mobile:\"\",confirmPassword:\"\",errors:{name:'',email:'',mobile:''},userdetails:[]};return _this;}_createClass(EditProfile,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({name:sessionStorage.getItem(\"TempUserName\"),email:sessionStorage.getItem(\"TempUserEmail\"),mobile:sessionStorage.getItem(\"TempUserMobile\")});// console.log(this.state.Id);\n// var body = {\n//   Id: sessionStorage.getItem(\"Identity\"),\n// }\n// console.log(\"Body\"+body.Id);\n//     const url = \"http://localhost:9000/details\";\n//       let headers = new Headers();\n//       headers.append('Content-Type','application/json');\n//       headers.append('Accept','application/json');\n//       headers.append('Access-Control-Allow-origin',url);\n//       headers.append('Access-Control-Allow-Credentials','true');\n//       headers.append('POST','GET');\n//       fetch(url, {\n//         headers:headers,\n//         method: 'POST',\n//         body: JSON.stringify(body)\n//       })\n//       .then(response => {if(response.ok){\n//         response.json()\n//         .then(res=> {\n//           console.log(\"Response:\"+res)\n//           this.setState({\n//               userdetails : res,\n//               name : res.Name,\n//               email : res.Email,\n//               mobile : res.Mobile\n//           })          \n//         })\n//       }\n//       })\n//       console.log(body);\n}},{key:\"handleUpdate\",// handleNameChange = event => {\n//   this.setState({\n//     name : event.target.value\n//   });\n//   console.log(this.state.name);\n// }\n// handleEmailChange = event => {\n//   this.setState({\n//     email : event.target.value\n//   });\n// }\n// handleMobileChange = event => {\n//   this.setState({\n//     mobile : event.target.value\n//   });\n// }\nvalue:function handleUpdate(event){event.preventDefault();body={Id:sessionStorage.getItem(\"Identity\"),Name:this.state.name,Email:this.state.email,Mobile:this.state.mobile};console.log(body);if(this.state.name===\"\"){alert('Please select the name');}else if(this.state.email===\"\"){alert('Please select the email');}else if(this.state.mobile===\"\"){alert('Please select the mobile');}else{if(this.state.n===true&&this.state.e===true&&this.state.m===true){console.log(\"Hello\");var url=\"http://localhost:9000/editprofile\";var headers=new Headers();headers.append('Content-Type','application/json');headers.append('Accept','application/json');headers.append('Access-Control-Allow-origin',url);headers.append('Access-Control-Allow-Credentials','true');headers.append('GET','POST');fetch(url,{headers:headers,method:'POST',body:JSON.stringify(body)}).then(function(response){return response.json();}).then(function(contents){console.log(contents);// .then(response =>{window.location.href=\"/Login\"});             \n}).catch(function(){return console.log(\"can't access\"+url+\"response. \");});alert(\"Details updated successfully!\");//   this.props.history.push(\"/profile\");\nwindow.location.href=\"/profile\";}else{alert(\"enter details correctly\");}}}},{key:\"render\",value:function render(){//   const {errors} = this.state;\nreturn React.createElement(\"div\",{style:image},React.createElement(\"div\",{className:\"wrapper\"},React.createElement(Nav,null),React.createElement(\"div\",{class:\"main_content\"},React.createElement(\"center\",null,React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"auth-wrapper\"},React.createElement(\"div\",{className:\"auth-inner\"},React.createElement(\"form\",null,React.createElement(\"h3\",null,\"Editing Profile\"),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Name:\"),React.createElement(\"input\",{type:\"text\",name:\"name\",id:\"name\",className:\"form-control\",onChange:this.handleNameChange,value:this.state.name,required:true}),React.createElement(\"span\",{style:span1},this.state.errors.name)),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Email address\"),React.createElement(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",onChange:this.handleEmailChange,value:this.state.email}),React.createElement(\"span\",{style:span1,className:\"error\"},this.state.errors.email)),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Mobile\"),React.createElement(\"input\",{type:\"phone\",name:\"mobile\",className:\"form-control\",onChange:this.handleMobileChange,value:this.state.mobile}),React.createElement(\"span\",{style:span1,className:\"error\"},this.state.errors.mobile)),React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",onClick:this.handleUpdate},\"Update\"))),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null))))));}}]);return EditProfile;}(Component);export{EditProfile as default};","map":{"version":3,"sources":["/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/src/components/User/EditProfile.js"],"names":["React","Component","Nav","img","image","backgroundImage","width","height","backgroundRepeat","backgroundSize","span1","color","body","validEmailRegex","RegExp","validNameRegex","validMobileRegex","EditProfile","props","handleNameChange","event","target","name","value","errors","state","test","setState","n","handleEmailChange","email","e","handleMobileChange","mobile","m","bind","handleUpdate","confirmPassword","userdetails","sessionStorage","getItem","preventDefault","Id","Name","Email","Mobile","console","log","alert","url","headers","Headers","append","fetch","method","JSON","stringify","then","response","json","contents","catch","window","location","href"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n//import logo from '../images/userhome.jpg';\nimport '../images/bgimage.css';\nimport './UserHome.css'\nimport Nav from './nav.js';\nimport img from '../images/userlogin.jpeg';\nconst image = {\n  backgroundImage: 'url(' + img + ')',\n  width: '100%',\n  height: '100%',\n  backgroundRepeat: 'no-repeat',\n  backgroundSize: '100% 100%',\n}\nconst span1 = {\n  color: \"red\"\n}\nvar body;\nconst validEmailRegex = RegExp(/^(([^<>()\\[\\]\\.,;:\\s@\\\"]+(\\.[^<>()\\[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i);\nconst validNameRegex = RegExp(/^[a-z A-Z,.'-]+$/i);\nconst validMobileRegex = RegExp(/^[6-9]{1}[0-9]{9}$/);\n\nexport default class EditProfile extends Component{\n  constructor(props) {\n    super(props);\n    this.handleNameChange = this.handleNameChange.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleMobileChange = this.handleMobileChange.bind(this);  \n    this.handleUpdate = this.handleUpdate.bind(this);\n        this.state = {\n          n:true,\n          e:true,\n          m:true,\n          name: \"\",\n          email:\"\",\n          mobile:\"\",\n          confirmPassword: \"\",\n          errors: {\n            name: '',\n            email: '',\n            mobile : '',\n          },\n          userdetails :[]\n        };\n        \n    \n    \n  }\n  componentDidMount(){\n    this.setState({  \n        name : sessionStorage.getItem(\"TempUserName\"),\n        email : sessionStorage.getItem(\"TempUserEmail\"),\n        mobile : sessionStorage.getItem(\"TempUserMobile\")\n    \n    })          \n\n    // console.log(this.state.Id);\n    // var body = {\n    //   Id: sessionStorage.getItem(\"Identity\"),\n    \n    // }\n    // console.log(\"Body\"+body.Id);\n\n    //     const url = \"http://localhost:9000/details\";\n    //       let headers = new Headers();\n      \n    //       headers.append('Content-Type','application/json');\n    //       headers.append('Accept','application/json');\n      \n    //       headers.append('Access-Control-Allow-origin',url);\n    //       headers.append('Access-Control-Allow-Credentials','true');\n      \n    //       headers.append('POST','GET');\n      \n    //       fetch(url, {\n    //         headers:headers,\n    //         method: 'POST',\n    //         body: JSON.stringify(body)\n    //       })\n    //       .then(response => {if(response.ok){\n    //         response.json()\n    //         .then(res=> {\n    //           console.log(\"Response:\"+res)\n    //           this.setState({\n    //               userdetails : res,\n    //               name : res.Name,\n    //               email : res.Email,\n    //               mobile : res.Mobile\n\n    //           })          \n    //         })\n    //       }\n          \n    //       })\n    //       console.log(body);\n             \n    } \n    handleNameChange = event => {\n        const { name, value } = event.target;\n        let errors = this.state.errors;\n        errors.name = \n        validNameRegex.test(value)\n                ? ''\n                : 'Name should contain only letters';\n        if(errors.name ===  '')\n        {\n              this.setState({n : true});\n       }\n       else{\n        this.setState({n : false});\n       }\n        this.setState({errors, [name]: value});\n      }\n    \n  \n    handleEmailChange = event => {\n      const { name, value } = event.target;\n      let errors = this.state.errors;\n      errors.email = \n            validEmailRegex.test(value)\n              ? ''\n              : 'Email is not valid!';\n      if(errors.email ===  '')\n        {\n           this.setState({e : true});\n       }\n       else{\n        this.setState({e : false});\n       }\n      this.setState({errors, [name]: value});\n    }\n  \n    handleMobileChange = event => {\n      const { name, value } = event.target;\n      let errors = this.state.errors;\n      errors.mobile = \n      (validMobileRegex.test(value))\n        ? ''\n        : 'Enter a valid phone number!';\n     if(errors.mobile ===  '')\n      {\n          this.setState({m : true});\n      }\n      else{\n        this.setState({m : false});\n       }\n      this.setState({errors, [name]: value});\n    }\n    // handleNameChange = event => {\n    //   this.setState({\n    //     name : event.target.value\n    //   });\n    //   console.log(this.state.name);\n    // }\n    // handleEmailChange = event => {\n    //   this.setState({\n    //     email : event.target.value\n    //   });\n     \n    // }\n    // handleMobileChange = event => {\n    //   this.setState({\n    //     mobile : event.target.value\n    //   });\n     \n    // }\n    handleUpdate(event) {\n      event.preventDefault();\n      body = {\n        Id : sessionStorage.getItem(\"Identity\"),\n        Name: this.state.name,\n        Email: this.state.email,\n        Mobile: this.state.mobile,\n        \n        \n      }\n      console.log(body);\n      if (this.state.name ===\"\"){\n        alert('Please select the name')\n      }\n      else if(this.state.email ===\"\"){\n        alert('Please select the email')\n      }\n       else if (this.state.mobile ===\"\"){\n        alert('Please select the mobile')\n      }\n    \n      else{\n        if(this.state.n === true && this.state.e === true && this.state.m === true){\n          console.log(\"Hello\");\n         const url = \"http://localhost:9000/editprofile\";\n         let headers = new Headers();\n   \n         headers.append('Content-Type','application/json');\n         headers.append('Accept','application/json');\n   \n         headers.append('Access-Control-Allow-origin',url);\n         headers.append('Access-Control-Allow-Credentials','true');\n   \n         headers.append('GET','POST');\n   \n         fetch(url, {\n          headers:headers,\n          method: 'POST',\n          body: JSON.stringify(body)\n       })\n        .then(response => response.json())\n        .then(contents => {console.log(contents);\n        // .then(response =>{window.location.href=\"/Login\"});             \n     })\n   .catch(()=> console.log(\"can't access\" + url + \"response. \"))\n   alert(\"Details updated successfully!\");\n//   this.props.history.push(\"/profile\");\n  window.location.href=\"/profile\";\n    }\n    else{\n      alert(\"enter details correctly\")\n    }\n  \n    \n    }\n  }\n\n    render() {\n    //   const {errors} = this.state;\n        return (\n          <div style={image}>\n<div className=\"wrapper\">\n          <Nav/>\n                      \n                      <div class=\"main_content\">\n                    <center>\n                    <br/><br/><br/>\n                      <br/><br/><br/><br/>\n                      <br/><br/><br/>\n                    \n                      <div className=\"auth-wrapper\">\n                      <div className=\"auth-inner\">\n                         \n                      <form>\n                          <h3>Editing Profile</h3>\n                          <div className=\"form-group\">\n                              <label>Name:</label>\n                              <input type=\"text\" name=\"name\" id=\"name\" className=\"form-control\" onChange={this.handleNameChange} value={this.state.name} required\n                             />\n                              <span style={span1} >{this.state.errors.name}</span> \n                          </div>\n                          <div className=\"form-group\">\n                              <label>Email address</label>\n                              <input type=\"email\" name=\"email\"  className=\"form-control\" onChange={this.handleEmailChange} value={this.state.email}\n                             />\n                               <span style={span1} className='error'>{this.state.errors.email}</span> \n                          </div>\n          \n                          <div className=\"form-group\">\n                              <label>Mobile</label>\n                              <input type=\"phone\" name=\"mobile\" className=\"form-control\" onChange={this.handleMobileChange} value={this.state.mobile}\n                             />\n                               <span style={span1} className='error'>{this.state.errors.mobile}</span> \n                          </div>\n          \n                          \n          \n                          <button type=\"submit\" className=\"btn btn-primary btn-block\" onClick={this.handleUpdate}>Update</button>          \n                      </form>\n                      </div>\n                      <br/><br/><br/><br/><br/><br/><br/><br/>\n                      <br/><br/><br/><br/><br/><br/><br/><br/>\n                      <br/><br/><br/><br/><br/><br/><br/><br/>\n                      </div>\n                      </center>\n                      </div>\n                     </div>\n                      </div>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}