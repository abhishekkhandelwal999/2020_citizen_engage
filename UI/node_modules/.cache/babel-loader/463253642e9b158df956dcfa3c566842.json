{"ast":null,"code":"var _jsxFileName = \"/Users/khandelwal_abhishek/gnits/2020_citizen_engage/UI/src/components/User/complaint.js\";\nimport React, { Component } from \"react\";\nimport img from '../images/complaint.jpg';\nimport Nav from './nav.js';\nconst image = {\n  backgroundImage: 'url(' + img + ')',\n  width: \"100%\",\n  height: '100%',\n  backgroundRepeat: 'no-repeat',\n  backgroundSize: '100% 100%'\n};\nvar body;\nexport default class complaint extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleCategoryChange = event => {\n      this.setState({\n        category: event.target.value\n      });\n      console.log(this.state.category);\n    };\n\n    this.handleImageChange = event => {\n      var file = document.querySelector(\"#fUpload\");\n\n      if (/\\.(jpe?g|png|gif)$/i.test(file.files[0].name) === false) {\n        alert(\"not an image!\");\n      } else {\n        this.setState({\n          image: event.target.value\n        });\n        console.log(this.state.image);\n      }\n    };\n\n    this.handleLocationChange = event => {\n      this.setState({\n        location: event.target.value\n      });\n      console.log(this.state.location);\n    };\n\n    this.handleDescriptionChange = event => {\n      this.setState({\n        description: event.target.value\n      });\n    };\n\n    this.handleCategoryChange = this.handleCategoryChange.bind(this);\n    this.handleImageChange = this.handleImageChange.bind(this);\n    this.handleLocationChange = this.handleLocationChange.bind(this);\n    this.handleDescriptionChange = this.handleDescriptionChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this); //this.validateForm = this.validateForm.bind(this);\n    //\n\n    this.state = {\n      category: \"\",\n      image: \"\",\n      location: \"\",\n      description: \"\" //confirmPassword: \"\"\n\n    };\n  }\n\n  CurDateTime() {\n    var tempDate = new Date();\n    console.log(tempDate);\n    var date = tempDate.getFullYear() + '-' + (tempDate.getMonth() + 1) + '-' + tempDate.getDate() + ' ' + tempDate.getHours() + ':' + tempDate.getMinutes() + ':' + tempDate.getSeconds();\n    const currDate = \"Current Date= \" + date;\n    console.log(currDate);\n    return (// <p>{currDate}</p>\n      date\n    );\n  }\n\n  handleSubmit(event) {\n    console.log(\"sample\" + this.state.image);\n    event.preventDefault();\n    var totalimgname = this.state.image.split(\"\\\\\");\n    var imgname = totalimgname[totalimgname.length - 1];\n    body = {\n      Id: sessionStorage.getItem(\"Identity\"),\n      Email: sessionStorage.getItem(\"EmailId\"),\n      Name: sessionStorage.getItem(\"UserName\"),\n      Category: this.state.category,\n      CreatedImage: imgname,\n      ClosedImage: \"Not Yet Closed\",\n      Location: this.state.location,\n      CreatedDescription: this.state.description,\n      ClosedDescription: \"Not Yet Solved\",\n      CreatedAt: this.CurDateTime(),\n      Status: \"Pending\"\n    };\n    console.log(body);\n\n    if (this.state.image === \"\") {\n      alert('Please select the image');\n    } else if (this.state.description === \"\") {\n      alert('Please enter the description');\n    } else {\n      const url = \"http://localhost:9000/complaint\";\n      let headers = new Headers();\n      headers.append('Content-Type', 'application/json');\n      headers.append('Accept', 'application/json');\n      headers.append('Access-Control-Allow-origin', url);\n      headers.append('Access-Control-Allow-Credentials', 'true');\n      headers.append('GET', 'POST');\n      fetch(url, {\n        headers: headers,\n        method: 'POST',\n        body: JSON.stringify(body)\n      }).then(response => response.json()).then(contents => {\n        console.log(contents); // .then(response =>{window.location.href=\"/Login\"});             \n      }).catch(() => console.log(\"can't access\" + url + \"response. \"));\n      alert(\"Complaint submitted successfully!\");\n      this.props.history.push(\"/user-home\");\n    }\n  }\n\n  render() {\n    // var eid=this.props.match.params.id;\n    // console.log(eid);\n    var identity = sessionStorage.getItem(\"Identity\");\n    var emailid = sessionStorage.getItem(\"EmailId\");\n    console.log(\"session storage:\" + identity + \" : \" + emailid);\n    return React.createElement(\"div\", {\n      class: \"wrapper\",\n      style: image,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"main_content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Complaint Registration\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"auth-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"auth-inner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Category:\", React.createElement(\"select\", {\n      name: \"category\",\n      onChange: this.handleCategoryChange,\n      value: this.state.category,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"Not Selected\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Select Category\"), React.createElement(\"option\", {\n      value: \"Electricity\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, \"Electricity\"), React.createElement(\"option\", {\n      value: \"Water\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Water\"), React.createElement(\"option\", {\n      value: \"Road\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, \"Road\"), React.createElement(\"option\", {\n      value: \"Garbage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Garbage\")))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"Upload Image:\", React.createElement(\"input\", {\n      type: \"file\",\n      name: \"image\",\n      id: \"fUpload\",\n      value: this.state.image,\n      onChange: this.handleImageChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"Location:\", React.createElement(\"select\", {\n      name: \"location\",\n      onChange: this.handleLocationChange,\n      value: this.state.location,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"Not Selected\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, \"Select Location\"), React.createElement(\"option\", {\n      value: \"Ameerpet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Ameerpet\"), React.createElement(\"option\", {\n      value: \"Asif Nagar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, \"Asif Nagar\"), React.createElement(\"option\", {\n      value: \"Attapur\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"Attapur\"), React.createElement(\"option\", {\n      value: \"Bahadurpura\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \"Bahadurpura\"), React.createElement(\"option\", {\n      value: \"Balnagar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, \"Balnagar\"), React.createElement(\"option\", {\n      value: \"Domalguda\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"Domalguda\"), React.createElement(\"option\", {\n      value: \"Erragadda\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \"Erragadda\"), React.createElement(\"option\", {\n      value: \"Gachibowli\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, \"Gachibowli\"), React.createElement(\"option\", {\n      value: \"Khairatabad\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Khairatabad\"), React.createElement(\"option\", {\n      value: \"Kukatpally\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, \"Kukatpally\"), React.createElement(\"option\", {\n      value: \"Kondapur\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, \"Kondapur\"), React.createElement(\"option\", {\n      value: \"Lakdikapul\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, \"Lakdikapul\"), React.createElement(\"option\", {\n      value: \"LB Nagar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, \"LB Nagar\"), React.createElement(\"option\", {\n      value: \"Malakpet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Malakpet\"), React.createElement(\"option\", {\n      value: \"Miyapur\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Miyapur\"), React.createElement(\"option\", {\n      value: \"Musheerabad\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"Musheerabad\"), React.createElement(\"option\", {\n      value: \"Nampally\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Nampally\"), React.createElement(\"option\", {\n      value: \"Nizampet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Nizampet\"), React.createElement(\"option\", {\n      value: \"Panjagutta\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Panjagutta\"), React.createElement(\"option\", {\n      value: \"Saidabad\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"Saidabad\"), React.createElement(\"option\", {\n      value: \"Secundrabad\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Secundrabad\"), React.createElement(\"option\", {\n      value: \"Shaikpet\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Shaikpet\")))), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, \"Description:\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }), React.createElement(\"textarea\", {\n      cols: 33,\n      rows: 4,\n      name: \"description\",\n      onChange: this.handleDescriptionChange,\n      value: this.state.description,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary btn-block\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"Submit\")))))))));\n  }\n\n}","map":{"version":3,"sources":["/Users/khandelwal_abhishek/gnits/2020_citizen_engage/UI/src/components/User/complaint.js"],"names":["React","Component","img","Nav","image","backgroundImage","width","height","backgroundRepeat","backgroundSize","body","complaint","constructor","props","handleCategoryChange","event","setState","category","target","value","console","log","state","handleImageChange","file","document","querySelector","test","files","name","alert","handleLocationChange","location","handleDescriptionChange","description","bind","handleSubmit","CurDateTime","tempDate","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","currDate","preventDefault","totalimgname","split","imgname","length","Id","sessionStorage","getItem","Email","Name","Category","CreatedImage","ClosedImage","Location","CreatedDescription","ClosedDescription","CreatedAt","Status","url","headers","Headers","append","fetch","method","JSON","stringify","then","response","json","contents","catch","history","push","render","identity","emailid"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport img from '../images/complaint.jpg';\nimport Nav from './nav.js';\n\n\n\nconst image = {\n    backgroundImage: 'url(' + img + ')',\n    width: \"100%\",\n    height: '100%',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: '100% 100%',\n  }\n  var body;\n  \nexport default class complaint extends Component {\n    constructor(props) {\n        super(props);\n        this.handleCategoryChange = this.handleCategoryChange.bind(this);\n        this.handleImageChange = this.handleImageChange.bind(this);\n        this.handleLocationChange = this.handleLocationChange.bind(this);\n        this.handleDescriptionChange=this.handleDescriptionChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        //this.validateForm = this.validateForm.bind(this);\n    \n        //\n      \n        this.state = {\n          category: \"\",\n          image:\"\",\n          location: \"\",\n          description:\"\",\n         \n          //confirmPassword: \"\"\n          \n        };\n    \n      }\n     CurDateTime() {\n        var tempDate = new Date();\n        console.log(tempDate);\n       var date = tempDate.getFullYear() + '-' + (tempDate.getMonth()+1) + '-' + tempDate.getDate() +' '+ tempDate.getHours()+':'+ tempDate.getMinutes()+':'+ tempDate.getSeconds();\n        const currDate = \"Current Date= \"+date;\n        console.log(currDate);\n        return (\n          // <p>{currDate}</p>\n          date\n        );\n      }\n      \n    \n      handleCategoryChange = event => {\n        this.setState({\n          category : event.target.value\n        });\n        console.log(this.state.category);\n      }\n    \n      handleImageChange = event => {\n        var file = document.querySelector(\"#fUpload\");\n        if ( /\\.(jpe?g|png|gif)$/i.test(file.files[0].name) === false ) {\n           alert(\"not an image!\");\n        }\n        else{\n          this.setState({\n            image : event.target.value\n          });\n          console.log(this.state.image);\n        }\n        \n      }\n    \n      handleLocationChange = event => {\n        this.setState({\n          location : event.target.value\n        });\n        console.log(this.state.location);\n      }\n    \n      handleDescriptionChange = event => {\n        this.setState({\n          description : event.target.value\n        });\n      }\n    \n    \n    \n      handleSubmit(event) {\n        console.log(\"sample\"+this.state.image);\n        event.preventDefault();\n        var totalimgname = this.state.image.split(\"\\\\\");\n        var imgname = totalimgname[totalimgname.length-1];\n        body = {\n          Id: sessionStorage.getItem(\"Identity\"),\n          Email : sessionStorage.getItem(\"EmailId\"),\n          Name : sessionStorage.getItem(\"UserName\"),\n          Category: this.state.category,\n          CreatedImage: imgname,\n          ClosedImage: \"Not Yet Closed\",\n          Location: this.state.location,\n          CreatedDescription: this.state.description,\n          ClosedDescription:\"Not Yet Solved\",\n          CreatedAt : this.CurDateTime(),\n          Status : \"Pending\",\n        }\n        console.log(body);\n        if (this.state.image===\"\"){\n          alert('Please select the image')\n        }\n        \n        else if(this.state.description===\"\"){\n          alert('Please enter the description')\n        }\n        else{\n           const url = \"http://localhost:9000/complaint\";\n           let headers = new Headers();\n     \n           headers.append('Content-Type','application/json');\n           headers.append('Accept','application/json');\n     \n           headers.append('Access-Control-Allow-origin',url);\n           headers.append('Access-Control-Allow-Credentials','true');\n     \n           headers.append('GET','POST');\n     \n           fetch(url, {\n            headers:headers,\n            method: 'POST',\n            body: JSON.stringify(body)\n         })\n          .then(response => response.json())\n          .then(contents => {console.log(contents);\n           \n          // .then(response =>{window.location.href=\"/Login\"});             \n       })\n     .catch(()=> console.log(\"can't access\" + url + \"response. \"))\n     alert(\"Complaint submitted successfully!\");\n        this.props.history.push(\"/user-home\");\n        }\n     \n      }\n\n    \n    render() {\n      // var eid=this.props.match.params.id;\n      // console.log(eid);\n      var identity = sessionStorage.getItem(\"Identity\");\n      var emailid = sessionStorage.getItem(\"EmailId\");\n      console.log(\"session storage:\"+identity+\" : \"+emailid);\n      \n        return (\n            <div class=\"wrapper\" style={image}>\n               <Nav/>      \n                <div class=\"main_content\">\n                    <center>\n                    <div class=\"header\"><b>Complaint Registration</b></div>  \n                    <br/><br/>\n                    <div class=\"info\">\n                    <div className=\"auth-wrapper\">\n    <div className=\"auth-inner\">\n    <div>\n            <form>\n\n                <div className=\"form-group\">\n                    <label>\n                        Category:\n                        <select name=\"category\" onChange={this.handleCategoryChange} value={this.state.category}> \n                        <option value=\"Not Selected\">Select Category</option>\n                            <option value=\"Electricity\">Electricity</option>\n                            <option value=\"Water\">Water</option>\n                            <option value=\"Road\">Road</option>\n                            <option value=\"Garbage\">Garbage</option>\n                        </select>\n                    </label>\n                 </div>\n                <div className=\"form-group\">\n                    Upload Image:\n                    <input type=\"file\" name=\"image\" id=\"fUpload\" value = {this.state.image} onChange={this.handleImageChange} />\n                </div>\n                <div className=\"form-group\" >\n                    <label>\n                        Location:\n                        <select name=\"location\" onChange={this.handleLocationChange} value={this.state.location}> \n                        <option value=\"Not Selected\">Select Location</option>\n                        <option value=\"Ameerpet\">Ameerpet</option>\n                        <option value=\"Asif Nagar\">Asif Nagar</option>\n                            <option value=\"Attapur\">Attapur</option>\n                            <option value=\"Bahadurpura\">Bahadurpura</option>\n                            <option value=\"Balnagar\">Balnagar</option>\n                            <option value=\"Domalguda\">Domalguda</option>\n                            <option value=\"Erragadda\">Erragadda</option>\n                            <option value=\"Gachibowli\">Gachibowli</option>\n                            <option value=\"Khairatabad\">Khairatabad</option>\n                            <option value=\"Kukatpally\">Kukatpally</option>\n                            <option value=\"Kondapur\">Kondapur</option>\n                            <option value=\"Lakdikapul\">Lakdikapul</option>\n                            <option value=\"LB Nagar\">LB Nagar</option>\n                            <option value=\"Malakpet\">Malakpet</option>\n                            <option value=\"Miyapur\">Miyapur</option>\n                            <option value=\"Musheerabad\">Musheerabad</option>\n                            <option value=\"Nampally\">Nampally</option>\n                            <option value=\"Nizampet\">Nizampet</option>\n                            <option value=\"Panjagutta\">Panjagutta</option>\n                            <option value=\"Saidabad\">Saidabad</option>\n                            <option value=\"Secundrabad\">Secundrabad</option>\n                            <option value=\"Shaikpet\">Shaikpet</option>\n\n                           \n                        </select>\n                    </label>\n                 </div>\n                <div className=\"form-group\">\n                    <label>Description:</label><br></br>\n                    <textarea cols={33} rows={4} name=\"description\" onChange={this.handleDescriptionChange} value={this.state.description}/>\n                </div>\n                <button type=\"submit\" className=\"btn btn-primary btn-block\" onClick={this.handleSubmit}>Submit</button>        \n            </form>\n        </div>\n        </div>\n            </div>\n                    </div>\n                    </center>\n                     \n                    \n                    </div>\n                    \n\n          </div>  \n            \n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}