{"ast":null,"code":"import _classCallCheck from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import img from'../images/complaint.jpg';import Nav from'./nav.js';var image={backgroundImage:'url('+img+')',width:\"100%\",height:'100%',backgroundRepeat:'no-repeat',backgroundSize:'100% 100%'};var body;var complaint=/*#__PURE__*/function(_Component){_inherits(complaint,_Component);function complaint(props){var _this;_classCallCheck(this,complaint);_this=_possibleConstructorReturn(this,_getPrototypeOf(complaint).call(this,props));_this.handleCategoryChange=function(event){_this.setState({category:event.target.value});console.log(_this.state.category);};_this.handleImageChange=function(event){var file=document.querySelector(\"#fUpload\");if(/\\.(jpe?g|png|gif)$/i.test(file.files[0].name)===false){alert(\"not an image!\");}else{_this.setState({image:event.target.value});console.log(_this.state.image);}};_this.handleLocationChange=function(event){_this.setState({location:event.target.value});console.log(_this.state.location);};_this.handleDescriptionChange=function(event){_this.setState({description:event.target.value});};_this.handleCategoryChange=_this.handleCategoryChange.bind(_assertThisInitialized(_this));_this.handleImageChange=_this.handleImageChange.bind(_assertThisInitialized(_this));_this.handleLocationChange=_this.handleLocationChange.bind(_assertThisInitialized(_this));_this.handleDescriptionChange=_this.handleDescriptionChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));//this.validateForm = this.validateForm.bind(this);\n//\n_this.state={category:\"\",image:\"\",location:\"\",description:\"\"//confirmPassword: \"\"\n};return _this;}_createClass(complaint,[{key:\"CurDateTime\",value:function CurDateTime(){var tempDate=new Date();var date=tempDate.getFullYear()+'-'+(tempDate.getMonth()+1)+'-'+tempDate.getDate()+' '+tempDate.getHours()+':'+tempDate.getMinutes()+':'+tempDate.getSeconds();var currDate=\"Current Date= \"+date;console.log(currDate);return(// <p>{currDate}</p>\ndate);}},{key:\"handleSubmit\",value:function handleSubmit(event){console.log(\"sample\"+this.state.image);event.preventDefault();var totalimgname=this.state.image.split(\"\\\\\");var imgname=totalimgname[totalimgname.length-1];body={Id:sessionStorage.getItem(\"Identity\"),Email:sessionStorage.getItem(\"EmailId\"),Name:sessionStorage.getItem(\"UserName\"),Category:this.state.category,CreatedImage:imgname,ClosedImage:\"Not Yet Closed\",Location:this.state.location,CreatedDescription:this.state.description,ClosedDescription:\"Not Yet Solved\",CreatedAt:this.CurDateTime(),Status:\"Pending\"};console.log(body);if(this.state.image===\"\"){alert('Please select the image');}else if(this.state.description===\"\"){alert('Please enter the description');}else{var url=\"http://localhost:9000/complaint\";var headers=new Headers();headers.append('Content-Type','application/json');headers.append('Accept','application/json');headers.append('Access-Control-Allow-origin',url);headers.append('Access-Control-Allow-Credentials','true');headers.append('GET','POST');fetch(url,{headers:headers,method:'POST',body:JSON.stringify(body)}).then(function(response){return response.json();}).then(function(contents){console.log(contents);// .then(response =>{window.location.href=\"/Login\"});             \n}).catch(function(){return console.log(\"can't access\"+url+\"response. \");});alert(\"Complaint submitted successfully!\");this.props.history.push(\"/user-home\");}}},{key:\"render\",value:function render(){// var eid=this.props.match.params.id;\n// console.log(eid);\nvar identity=sessionStorage.getItem(\"Identity\");var emailid=sessionStorage.getItem(\"EmailId\");console.log(\"session storage:\"+identity+\" : \"+emailid);return React.createElement(\"div\",{class:\"wrapper\",style:image},React.createElement(Nav,null),React.createElement(\"div\",{class:\"main_content\"},React.createElement(\"center\",null,React.createElement(\"div\",{class:\"header\"},React.createElement(\"b\",null,\"Complaint Registration\")),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"div\",{class:\"info\"},React.createElement(\"div\",{className:\"auth-wrapper\"},React.createElement(\"div\",{className:\"auth-inner\"},React.createElement(\"div\",null,React.createElement(\"form\",null,React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Category:\",React.createElement(\"select\",{name:\"category\",onChange:this.handleCategoryChange,value:this.state.category},React.createElement(\"option\",{value:\"Not Selected\"},\"Select Category\"),React.createElement(\"option\",{value:\"Electricity\"},\"Electricity\"),React.createElement(\"option\",{value:\"Water\"},\"Water\"),React.createElement(\"option\",{value:\"Road\"},\"Road\"),React.createElement(\"option\",{value:\"Garbage\"},\"Garbage\")))),React.createElement(\"div\",{className:\"form-group\"},\"Upload Image:\",React.createElement(\"input\",{type:\"file\",name:\"image\",id:\"fUpload\",value:this.state.image,onChange:this.handleImageChange})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Location:\",React.createElement(\"select\",{name:\"location\",onChange:this.handleLocationChange,value:this.state.location},React.createElement(\"option\",{value:\"Not Selected\"},\"Select Location\"),React.createElement(\"option\",{value:\"Ameerpet\"},\"Ameerpet\"),React.createElement(\"option\",{value:\"Asif Nagar\"},\"Asif Nagar\"),React.createElement(\"option\",{value:\"Attapur\"},\"Attapur\"),React.createElement(\"option\",{value:\"Bahadurpura\"},\"Bahadurpura\"),React.createElement(\"option\",{value:\"Balnagar\"},\"Balnagar\"),React.createElement(\"option\",{value:\"Domalguda\"},\"Domalguda\"),React.createElement(\"option\",{value:\"Erragadda\"},\"Erragadda\"),React.createElement(\"option\",{value:\"Gachibowli\"},\"Gachibowli\"),React.createElement(\"option\",{value:\"Khairatabad\"},\"Khairatabad\"),React.createElement(\"option\",{value:\"Kukatpally\"},\"Kukatpally\"),React.createElement(\"option\",{value:\"Kondapur\"},\"Kondapur\"),React.createElement(\"option\",{value:\"Lakdikapul\"},\"Lakdikapul\"),React.createElement(\"option\",{value:\"LB Nagar\"},\"LB Nagar\"),React.createElement(\"option\",{value:\"Malakpet\"},\"Malakpet\"),React.createElement(\"option\",{value:\"Miyapur\"},\"Miyapur\"),React.createElement(\"option\",{value:\"Musheerabad\"},\"Musheerabad\"),React.createElement(\"option\",{value:\"Nampally\"},\"Nampally\"),React.createElement(\"option\",{value:\"Nizampet\"},\"Nizampet\"),React.createElement(\"option\",{value:\"Panjagutta\"},\"Panjagutta\"),React.createElement(\"option\",{value:\"Saidabad\"},\"Saidabad\"),React.createElement(\"option\",{value:\"Secundrabad\"},\"Secundrabad\"),React.createElement(\"option\",{value:\"Shaikpet\"},\"Shaikpet\")))),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Description:\"),React.createElement(\"br\",null),React.createElement(\"textarea\",{cols:33,rows:4,name:\"description\",onChange:this.handleDescriptionChange,value:this.state.description})),React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",onClick:this.handleSubmit},\"Submit\")))))))));}}]);return complaint;}(Component);export{complaint as default};","map":{"version":3,"sources":["/Users/khandelwal_abhishek/gnits/2020_citizen_engage-master/UI/src/components/User/complaint.js"],"names":["React","Component","img","Nav","image","backgroundImage","width","height","backgroundRepeat","backgroundSize","body","complaint","props","handleCategoryChange","event","setState","category","target","value","console","log","state","handleImageChange","file","document","querySelector","test","files","name","alert","handleLocationChange","location","handleDescriptionChange","description","bind","handleSubmit","tempDate","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","currDate","preventDefault","totalimgname","split","imgname","length","Id","sessionStorage","getItem","Email","Name","Category","CreatedImage","ClosedImage","Location","CreatedDescription","ClosedDescription","CreatedAt","CurDateTime","Status","url","headers","Headers","append","fetch","method","JSON","stringify","then","response","json","contents","catch","history","push","identity","emailid"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport img from '../images/complaint.jpg';\nimport Nav from './nav.js';\n\n\n\nconst image = {\n    backgroundImage: 'url(' + img + ')',\n    width: \"100%\",\n    height: '100%',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: '100% 100%',\n  }\n  var body;\n  \nexport default class complaint extends Component {\n    constructor(props) {\n        super(props);\n        this.handleCategoryChange = this.handleCategoryChange.bind(this);\n        this.handleImageChange = this.handleImageChange.bind(this);\n        this.handleLocationChange = this.handleLocationChange.bind(this);\n        this.handleDescriptionChange=this.handleDescriptionChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        //this.validateForm = this.validateForm.bind(this);\n    \n        //\n      \n        this.state = {\n          category: \"\",\n          image:\"\",\n          location: \"\",\n          description:\"\",\n         \n          //confirmPassword: \"\"\n          \n        };\n    \n      }\n     CurDateTime() {\n        var tempDate = new Date();\n       var date = tempDate.getFullYear() + '-' + (tempDate.getMonth()+1) + '-' + tempDate.getDate() +' '+ tempDate.getHours()+':'+ tempDate.getMinutes()+':'+ tempDate.getSeconds();\n        const currDate = \"Current Date= \"+date;\n        console.log(currDate);\n        return (\n          // <p>{currDate}</p>\n          date\n        );\n      }\n      \n    \n      handleCategoryChange = event => {\n        this.setState({\n          category : event.target.value\n        });\n        console.log(this.state.category);\n      }\n    \n      handleImageChange = event => {\n        var file = document.querySelector(\"#fUpload\");\n        if ( /\\.(jpe?g|png|gif)$/i.test(file.files[0].name) === false ) {\n           alert(\"not an image!\");\n        }\n        else{\n          this.setState({\n            image : event.target.value\n          });\n          console.log(this.state.image);\n        }\n        \n      }\n    \n      handleLocationChange = event => {\n        this.setState({\n          location : event.target.value\n        });\n        console.log(this.state.location);\n      }\n    \n      handleDescriptionChange = event => {\n        this.setState({\n          description : event.target.value\n        });\n      }\n    \n    \n    \n      handleSubmit(event) {\n        console.log(\"sample\"+this.state.image);\n        event.preventDefault();\n        var totalimgname = this.state.image.split(\"\\\\\");\n        var imgname = totalimgname[totalimgname.length-1];\n        body = {\n          Id: sessionStorage.getItem(\"Identity\"),\n          Email : sessionStorage.getItem(\"EmailId\"),\n          Name : sessionStorage.getItem(\"UserName\"),\n          Category: this.state.category,\n          CreatedImage: imgname,\n          ClosedImage: \"Not Yet Closed\",\n          Location: this.state.location,\n          CreatedDescription: this.state.description,\n          ClosedDescription:\"Not Yet Solved\",\n          CreatedAt : this.CurDateTime(),\n          Status : \"Pending\",\n        }\n        console.log(body);\n        if (this.state.image===\"\"){\n          alert('Please select the image')\n        }\n        \n        else if(this.state.description===\"\"){\n          alert('Please enter the description')\n        }\n        else{\n           const url = \"http://localhost:9000/complaint\";\n           let headers = new Headers();\n     \n           headers.append('Content-Type','application/json');\n           headers.append('Accept','application/json');\n     \n           headers.append('Access-Control-Allow-origin',url);\n           headers.append('Access-Control-Allow-Credentials','true');\n     \n           headers.append('GET','POST');\n     \n           fetch(url, {\n            headers:headers,\n            method: 'POST',\n            body: JSON.stringify(body)\n         })\n          .then(response => response.json())\n          .then(contents => {console.log(contents);\n           \n          // .then(response =>{window.location.href=\"/Login\"});             \n       })\n     .catch(()=> console.log(\"can't access\" + url + \"response. \"))\n     alert(\"Complaint submitted successfully!\");\n        this.props.history.push(\"/user-home\");\n        }\n     \n      }\n\n    \n    render() {\n      // var eid=this.props.match.params.id;\n      // console.log(eid);\n      var identity = sessionStorage.getItem(\"Identity\");\n      var emailid = sessionStorage.getItem(\"EmailId\");\n      console.log(\"session storage:\"+identity+\" : \"+emailid);\n      \n        return (\n            <div class=\"wrapper\" style={image}>\n               <Nav/>      \n                <div class=\"main_content\">\n                    <center>\n                    <div class=\"header\"><b>Complaint Registration</b></div>  \n                    <br/><br/>\n                    <div class=\"info\">\n                    <div className=\"auth-wrapper\">\n    <div className=\"auth-inner\">\n    <div>\n            <form>\n\n                <div className=\"form-group\">\n                    <label>\n                        Category:\n                        <select name=\"category\" onChange={this.handleCategoryChange} value={this.state.category}> \n                        <option value=\"Not Selected\">Select Category</option>\n                            <option value=\"Electricity\">Electricity</option>\n                            <option value=\"Water\">Water</option>\n                            <option value=\"Road\">Road</option>\n                            <option value=\"Garbage\">Garbage</option>\n                        </select>\n                    </label>\n                 </div>\n                <div className=\"form-group\">\n                    Upload Image:\n                    <input type=\"file\" name=\"image\" id=\"fUpload\" value = {this.state.image} onChange={this.handleImageChange} />\n                </div>\n                <div className=\"form-group\" >\n                    <label>\n                        Location:\n                        <select name=\"location\" onChange={this.handleLocationChange} value={this.state.location}> \n                        <option value=\"Not Selected\">Select Location</option>\n                        <option value=\"Ameerpet\">Ameerpet</option>\n                        <option value=\"Asif Nagar\">Asif Nagar</option>\n                            <option value=\"Attapur\">Attapur</option>\n                            <option value=\"Bahadurpura\">Bahadurpura</option>\n                            <option value=\"Balnagar\">Balnagar</option>\n                            <option value=\"Domalguda\">Domalguda</option>\n                            <option value=\"Erragadda\">Erragadda</option>\n                            <option value=\"Gachibowli\">Gachibowli</option>\n                            <option value=\"Khairatabad\">Khairatabad</option>\n                            <option value=\"Kukatpally\">Kukatpally</option>\n                            <option value=\"Kondapur\">Kondapur</option>\n                            <option value=\"Lakdikapul\">Lakdikapul</option>\n                            <option value=\"LB Nagar\">LB Nagar</option>\n                            <option value=\"Malakpet\">Malakpet</option>\n                            <option value=\"Miyapur\">Miyapur</option>\n                            <option value=\"Musheerabad\">Musheerabad</option>\n                            <option value=\"Nampally\">Nampally</option>\n                            <option value=\"Nizampet\">Nizampet</option>\n                            <option value=\"Panjagutta\">Panjagutta</option>\n                            <option value=\"Saidabad\">Saidabad</option>\n                            <option value=\"Secundrabad\">Secundrabad</option>\n                            <option value=\"Shaikpet\">Shaikpet</option>\n\n                           \n                        </select>\n                    </label>\n                 </div>\n                <div className=\"form-group\">\n                    <label>Description:</label><br></br>\n                    <textarea cols={33} rows={4} name=\"description\" onChange={this.handleDescriptionChange} value={this.state.description}/>\n                </div>\n                <button type=\"submit\" className=\"btn btn-primary btn-block\" onClick={this.handleSubmit}>Submit</button>        \n            </form>\n        </div>\n        </div>\n            </div>\n                    </div>\n                    </center>\n                     \n                    \n                    </div>\n                    \n\n          </div>  \n            \n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}